{"version":3,"sources":["app.js","controllers.js","services.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["var lukkariApp = angular.module('lukkari', ['ionic', 'lukkari.controllers', 'lukkari.services', 'ionic-datepicker']);\r\n\r\nlukkariApp.run(function ($ionicPlatform) {\r\n    $ionicPlatform.ready(function () {\r\n        // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard\r\n        // for form inputs)\r\n        if (window.cordova && window.cordova.plugins.Keyboard) {\r\n            cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);\r\n            cordova.plugins.Keyboard.disableScroll(true);\r\n\r\n        }\r\n        if (window.StatusBar) {\r\n            // org.apache.cordova.statusbar required\r\n            StatusBar.styleDefault();\r\n        }\r\n    });\r\n});\r\n\r\n// http://blog.ionic.io/handling-cors-issues-in-ionic/\r\nlukkariApp.constant('ApiEndpoint', {\r\n    url: 'https://lukkarit.tamk.fi'\r\n});\r\n\r\n// menuContent-view is presented on the main view.\r\nlukkariApp.config(function ($stateProvider, $urlRouterProvider) {\r\n    $stateProvider\r\n        .state('app', {\r\n            url: '/app',\r\n            abstract: true,\r\n            templateUrl: 'templates/menu.html',\r\n            controller: 'LukkariCtrl'\r\n        })\r\n        .state('app.search', {\r\n            url: '/search',\r\n            views: {\r\n                'menuContent': {\r\n                    templateUrl: 'templates/search.html',\r\n                    controller: 'SearchCtrl'\r\n                }\r\n            }\r\n        })\r\n        .state('app.settings', {\r\n            url: '/settings',\r\n            views: {\r\n                'menuContent': {\r\n                    templateUrl: 'templates/settings.html',\r\n                    controller: 'SettingsCtrl'\r\n                }\r\n            }\r\n        })\r\n        .state('app.todayAppointment', {\r\n            url: '/today/:id',\r\n            views: {\r\n                'menuContent': {\r\n                    templateUrl: 'templates/appointment.html',\r\n                    controller: 'AppointmentCtrl'\r\n                }\r\n            }\r\n        })\r\n        .state('app.today', {\r\n            url: '/today',\r\n            views: {\r\n                'menuContent': {\r\n                    templateUrl: 'templates/today.html',\r\n                    controller: 'TodayCtrl'\r\n                }\r\n            }\r\n        })\r\n        .state('app.appointment', {\r\n            url: '/week/:id',\r\n            views: {\r\n                'menuContent': {\r\n                    templateUrl: 'templates/appointment.html',\r\n                    controller: 'AppointmentCtrl'\r\n                }\r\n            }\r\n        })\r\n        .state('app.week', {\r\n            url: '/week',\r\n            views: {\r\n                'menuContent': {\r\n                    templateUrl: 'templates/week.html',\r\n                    controller: 'WeekCtrl'\r\n                }\r\n            }\r\n        });\r\n    // if none of the above states are matched, use this as the fallback\r\n    $urlRouterProvider.otherwise('/app/today');\r\n});","var lukkariControllers = angular.module('lukkari.controllers', ['ngCordova']);\r\n\r\n// insert needed sidemenu stuff here\r\nlukkariControllers.controller('LukkariCtrl', function ($scope) {});\r\n\r\n// controller for today view\r\nlukkariControllers.controller('TodayCtrl', ['$scope', 'Timetables', '$ionicLoading', 'LocalStorage', '$ionicModal', 'MyDate',\r\nfunction ($scope, Timetables, $ionicLoading, LocalStorage, $ionicModal, MyDate) {\r\n        $scope.groupInfo = {};\r\n        $scope.groupInfo.group = LocalStorage.get('groupName');\r\n        $scope.dayOffset = 0;\r\n        $scope.currentDay = 'Today';\r\n\r\n        // Show new group modal when no group is set\r\n        $ionicModal.fromTemplateUrl('templates/newgroup.html', {\r\n            scope: $scope\r\n        }).then(function (modal) {\r\n            $scope.modal = modal;\r\n            if (!$scope.groupInfo.group) {\r\n                // open modal to set group name\r\n                $scope.modal.show();\r\n            }\r\n        });\r\n\r\n        $scope.closeGroupName = function () {\r\n            $scope.modal.hide();\r\n        };\r\n\r\n        // sets the group \r\n        $scope.setGroup = function () {\r\n            LocalStorage.set('groupName', $scope.groupInfo.group);\r\n            $scope.modal.hide();\r\n            $ionicLoading.show({\r\n                template: 'Loading...'\r\n            });\r\n            Timetables.getDay($scope.groupInfo.group, $scope.dayOffset, function (result) {\r\n                $scope.appointments = result;\r\n                $ionicLoading.hide();\r\n            });\r\n        };\r\n\r\n        $scope.appointments = [];\r\n        if ($scope.groupInfo.group !== undefined) {\r\n            $ionicLoading.show({\r\n                template: 'Loading...'\r\n            });\r\n            Timetables.getDay($scope.groupInfo.group, $scope.dayOffset, function (result) {\r\n                $scope.appointments = result;\r\n                $ionicLoading.hide();\r\n            });\r\n        }\r\n\r\n        // Moves a day forwards/backwards\r\n        $scope.moveDay = function (direction) {\r\n            // change the offset from current day\r\n            if (direction === -1) {\r\n                $scope.dayOffset -= 1;\r\n            } else if (direction === 1) {\r\n                $scope.dayOffset += 1;\r\n            } else {\r\n                throw new RangeError('Parameter out of range! Please use 1 or -1');\r\n            }\r\n            var date = MyDate.getDayFromToday($scope.dayOffset);\r\n            $scope.currentDay = MyDate.getLocaleDate(date, false);\r\n            $ionicLoading.show({\r\n                template: 'Loading...'\r\n            });\r\n            $scope.appointments = [];\r\n            Timetables.getDay($scope.groupInfo.group, $scope.dayOffset, function (result) {\r\n                $scope.appointments = result;\r\n                $ionicLoading.hide();\r\n            });\r\n        };\r\n}]);\r\n\r\n// controller for single appointment view\r\nlukkariControllers.controller('AppointmentCtrl', ['$scope', 'Timetables', '$ionicLoading', '$stateParams',\r\nfunction ($scope, Timetables, $ionicLoading, $stateParams) {\r\n        $scope.appointment = Timetables.getAppointment($stateParams.id);\r\n}]);\r\n\r\n// controller for weekly view\r\nlukkariControllers.controller('WeekCtrl', ['$scope', 'Timetables', '$ionicLoading', '$ionicModal', 'LocalStorage', 'MyDate', 'Lessons',\r\nfunction ($scope, Timetables, $ionicLoading, $ionicModal, LocalStorage, MyDate, Lessons) {\r\n        $scope.groupInfo = {};\r\n        $scope.week = {};\r\n        $scope.weekOffset = 0;\r\n        $scope.groupInfo.group = LocalStorage.get('groupName');\r\n\r\n        // Create modal for new group if no group name is set\r\n        if (!$scope.groupInfo.group) {\r\n            $ionicModal.fromTemplateUrl('templates/newgroup.html', {\r\n                scope: $scope\r\n            }).then(function (modal) {\r\n                $scope.modal = modal;\r\n\r\n                // open modal to set group name\r\n                $scope.modal.show();\r\n            });\r\n        }\r\n\r\n        // closes the group name dialog\r\n        $scope.closeGroupName = function () {\r\n            $scope.modal.hide();\r\n        };\r\n\r\n        // returns all of the appointments\r\n        function getAppointments() {\r\n            // show the loading window\r\n            $ionicLoading.show({\r\n                template: 'Loading...'\r\n            });\r\n            // get all the appointments\r\n            Timetables.getWeek($scope.groupInfo.group, $scope.weekOffset, function (result) {\r\n                var appointments = result;\r\n                $scope.days = [];\r\n                var startDate = MyDate.getMonday(appointments[0].startDate);\r\n                // loop whole week\r\n                for (var i = 0; i < 5; i++) {\r\n                    var day = {};\r\n                    // get mon-sun day\r\n                    day.date = MyDate.getDayFromDay(startDate, i);\r\n                    day.appointments = [];\r\n                    for (var j = 0; j < appointments.length; j++) {\r\n                        var appointment = appointments[j];\r\n                        // if is the same day push into the array\r\n                        if (appointment.startDate.toDateString() === day.date.toDateString()) {\r\n                            day.appointments.push(appointment);\r\n                        }\r\n                    }\r\n                    // add the day into the array\r\n                    $scope.days.push(day);\r\n                }\r\n                // hide the loading after done\r\n                $ionicLoading.hide();\r\n            });\r\n        }\r\n\r\n        Lessons.get($scope.groupInfo.group, function (lessons) {\r\n            if (lessons.hasOwnProperty(success) && lessons.success !== false) {\r\n                console.log('FAILED');\r\n            } else {\r\n\r\n                $scope.lessons = lessons;\r\n            }\r\n        });\r\n\r\n        // sets the group name\r\n        $scope.setGroup = function () {\r\n            LocalStorage.set('groupName', $scope.groupInfo.group);\r\n            $scope.modal.hide();\r\n            getAppointments();\r\n        };\r\n\r\n        $scope.appointments = [];\r\n        if ($scope.groupInfo.group !== undefined) {\r\n            getAppointments();\r\n        }\r\n\r\n        // moves a week forwards/backwards\r\n        $scope.moveWeek = function (direction) {\r\n            $scope.weekOffset += direction;\r\n            getAppointments();\r\n        };\r\n}]);\r\n\r\nlukkariControllers.controller('SettingsCtrl', ['$scope', 'LocalStorage', '$cordovaToast', '$ionicPlatform', '$cookies', '$timeout', '$cordovaCalendar', 'Timetables',\r\nfunction ($scope, LocalStorage, $cordovaToast, $ionicPlatform, $cookies, $timeout, $cordovaCalendar, Timetables) {\r\n        $scope.groupInfo = {};\r\n        $scope.reminder = {};\r\n        $scope.reminder.startDay = new Date();\r\n        $scope.reminder.weeks = 1;\r\n\r\n        var toastOptions = {\r\n            duration: 'long',\r\n            position: 'center'\r\n        };\r\n\r\n        function datePickerCallback(val) {\r\n            // do something \r\n            if (typeof (val) === 'undefined') {\r\n                console.log('No date selected');\r\n            } else {\r\n                console.log('Selected date is : ', val);\r\n                $scope.reminder.startDay = val;\r\n            }\r\n        }\r\n\r\n        // https://github.com/rajeshwarpatlolla/ionic-datepicker\r\n        $scope.datepickerObject = {\r\n            titleLabel: 'Select Date', //Optional\r\n            todayLabel: 'Today', //Optional\r\n            closeLabel: 'Close', //Optional\r\n            setLabel: 'Set', //Optional\r\n            setButtonType: 'button-positive', //Optional\r\n            todayButtonType: 'button-stable', //Optional\r\n            closeButtonType: 'button-stable', //Optional\r\n            inputDate: new Date(), //Optional\r\n            mondayFirst: true, //Optional\r\n            //disabledDates: disabledDates, //Optional\r\n            //weekDaysList: weekDaysList, //Optional\r\n            //monthList: monthList, //Optional\r\n            templateType: 'popup', //Optional\r\n            showTodayButton: 'true', //Optional\r\n            modalHeaderColor: 'bar-stable', //Optional\r\n            modalFooterColor: 'bar-stable', //Optional\r\n            from: new Date(), //Optional\r\n            //to: new Date(2018, 8, 25), //Optional\r\n            callback: function (val) { //Mandatory\r\n                datePickerCallback(val);\r\n            },\r\n            dateFormat: 'dd-MM-yyyy', //Optional\r\n            closeOnSelect: false, //Optional\r\n        };\r\n\r\n        $scope.reminder.time = 'null';\r\n        $scope.groupInfo.group = LocalStorage.get('groupName');\r\n        if (!$scope.groupInfo.group) {\r\n            $scope.groupInfo.group = '';\r\n        }\r\n\r\n        $scope.changeGroup = function () {\r\n            LocalStorage.set('groupName', $scope.groupInfo.group);\r\n            // show toast that change was successful\r\n            $ionicPlatform.ready(function () {\r\n                try {\r\n                    $cordovaToast.show('Group successfully changed!',\r\n                            toastOptions.duration,\r\n                            toastOptions.position)\r\n                        .then(function (success) {\r\n                            $cookies.remove('PHPSESSID');\r\n                        });\r\n                } catch (e) {\r\n                    // do nothing\r\n                } finally {\r\n                    // change to today view after 2 seconds\r\n                    $timeout(function () {\r\n                        window.location.href = '#/app/today';\r\n                    }, 2000);\r\n                }\r\n            });\r\n        };\r\n\r\n        $scope.addToCalendar = function () {\r\n            var appointments = [];\r\n            var calOptions = {};\r\n            // works on iOS only\r\n            calOptions.calendarName = 'Lukkari app calendar';\r\n            // android has id but no fucking idea what it does (1 is default)\r\n            // so great documentation 5/5 \r\n            // https://github.com/EddyVerbruggen/Calendar-PhoneGap-Plugin\r\n            calOptions.calendarId = 1;\r\n\r\n            // google may set some default reminders depending on settings\r\n            // https://github.com/EddyVerbruggen/Calendar-PhoneGap-Plugin/issues/201\r\n            if ($scope.reminder.time !== 'null') {\r\n                calOptions.firstReminderMinutes = $scope.reminder.time;\r\n            } else {\r\n                calOptions.firstReminderMinutes = null;\r\n            }\r\n            calOptions.secondReminderMinutes = null;\r\n\r\n\r\n            var success = true;\r\n            console.log('$scope.reminder.weeks: ' + $scope.reminder.weeks);\r\n            console.log('$scope.reminder.startDay: ' + $scope.reminder.startDay);\r\n            // TODO create a service method that can get days from a day to a day.\r\n            // and use it here.\r\n\r\n            function getAppointments(result) {\r\n                appointments = result;\r\n                $ionicPlatform.ready(function () {\r\n                    appointments.forEach(createEvent(elment, index, array));\r\n                });\r\n            }\r\n\r\n            function createEvent(element, index, array) {\r\n                /*$cordovaCalendar.createEventWithOptions({\r\n                                title: element.summary,\r\n                                location: element.location,\r\n                                notes: 'Teacher(s): ' + element.teacher +\r\n                                    '\\nGroup(s): ' + element.groups +\r\n                                    '\\nCourse: ' + element.courseNumber,\r\n                                startDate: element.startDate,\r\n                                endDate: element.endDate,\r\n                                firstReminderMinutes: calOptions.firstReminderMinutes,\r\n                                secondReminderMinutes: calOptions.secondReminderMinutes,\r\n                                calendarName: calOptions.calendarName,\r\n                                calendarId: calOptions.calendarId\r\n                                    //calOptions: calOptions\r\n                            }).then(function (result) {\r\n\r\n                                console.log('successfully added week to calendar');\r\n                            }, function (err) {\r\n                                success = false;\r\n                            });*/\r\n                console.log('Added ' + element.summary + ', ' +\r\n                    element.startDate.toLocaleDateString());\r\n            }\r\n\r\n            // loop all weeks\r\n            for (var i = 1; i < $scope.reminder.weeks; i++) {\r\n                // get next weeks appointments\r\n                Timetables.getWeek($scope.groupInfo.group, i, getAppointments(result));\r\n            }\r\n\r\n            if (success) {\r\n                $cordovaToast.show('Calendar events successfully added!',\r\n                    toastOptions.duration,\r\n                    toastOptions.position);\r\n            } else {\r\n                $cordovaToast.show('Failed to add calendar events!',\r\n                    toastOptions.duration,\r\n                    toastOptions.position);\r\n            }\r\n\r\n        };\r\n}]);\r\n\r\n// TODO\r\nlukkariControllers.controller('SearchCtrl', ['$scope', 'LocalStorage',\r\nfunction ($scope, LocalStorage) {\r\n\r\n}]);","var lukkariServices = angular.module('lukkari.services', ['ngCookies', 'ngIcal']);\r\n\r\nlukkariServices.factory('LocalStorage', function () {\r\n    function get(name) {\r\n        return window.localStorage.getItem(name);\r\n    }\r\n\r\n    function set(name, value) {\r\n        return window.localStorage.setItem(name, value);\r\n    }\r\n\r\n    return {\r\n        get: get,\r\n        set: set\r\n    };\r\n});\r\n\r\n\r\nlukkariServices.factory('MyDate', function () {\r\n    var DAY_IN_MILLISECONDS = 86400000;\r\n\r\n    // returns the monday of the week date object of the given date\r\n    function getMonday(d) {\r\n        d = new Date(d);\r\n        var day = d.getDay(),\r\n            diff = d.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\r\n        return new Date(d.setDate(diff));\r\n    }\r\n\r\n    // formats a Date object into a string\r\n    // parameter: date object\r\n    // parameter2: return years boolean\r\n    // return: date string\r\n    // 11.02.2040\r\n    function formatDay(day, years) {\r\n        var dayString = '';\r\n        dayString += day.getDate();\r\n        dayString += '.';\r\n        dayString += (day.getMonth() + 1);\r\n        if (typeof years === 'boolean' && years) {\r\n            dayString += '.';\r\n            dayString += day.getFullYear();\r\n        }\r\n        return dayString;\r\n    }\r\n\r\n    function getLocaleDate(day, years) {\r\n        var options = {\r\n            //weekday: 'long',\r\n            month: 'numeric',\r\n            day: 'numeric'\r\n        };\r\n        if (typeof years === 'boolean' && years) {\r\n            options.year = 'numeric';\r\n        }\r\n        return new Intl.DateTimeFormat('fi-FI', options).format(day);\r\n    }\r\n\r\n    function getDayFromDay(currentDay, offsetDays) {\r\n        var day = currentDay.getTime();\r\n        // add desired amount of days to the millisecs\r\n        day += offsetDays * DAY_IN_MILLISECONDS;\r\n        // create Date object and set it's time to the millisecs\r\n        var date = new Date();\r\n        date.setTime(day);\r\n        return date;\r\n    }\r\n\r\n    // returns a day that is offset from today\r\n    function getDayFromToday(offsetDays) {\r\n        // today in millisecs since the beginning of time (UNIX time)\r\n        var day = Date.now();\r\n        // add desired amount of days to the millisecs\r\n        day += offsetDays * DAY_IN_MILLISECONDS;\r\n        // create Date object and set it's time to the millisecs\r\n        return new Date(day);\r\n    }\r\n\r\n    return {\r\n        getMonday: getMonday,\r\n        formatDay: formatDay,\r\n        getDayFromToday: getDayFromToday,\r\n        getLocaleDate: getLocaleDate,\r\n        getDayFromDay: getDayFromDay\r\n    };\r\n});\r\n\r\n\r\nlukkariServices.factory('Lessons', ['$http',\r\n   function ($http) {\r\n        var lessons = [];\r\n        var savedGroupName = '';\r\n\r\n        function get(groupName, callback) {\r\n            if (savedGroupName === groupName) {\r\n                callback(lessons);\r\n            } else {\r\n                savedGroupName = groupName;\r\n                var data = {\r\n                    studentGroup: [groupName.toUpperCase()]\r\n                };\r\n                var apiKey = 'Wu47zzKEPa7agvin47f5';\r\n                var url = 'https://opendata.tamk.fi/r1/reservation/search' + '?apiKey=' + apiKey;\r\n                $http({\r\n                    method: 'POST',\r\n                    url: url,\r\n                    data: data,\r\n                    withCredentials: true,\r\n                    headers: {\r\n                        'authorization': 'Basic V3U0N3p6S0VQYTdhZ3ZpbjQ3ZjU6',\r\n                        'accept-language': 'fi',\r\n                        'content-type': 'application/json',\r\n                        'cache-control': 'no-cache'\r\n                    }\r\n                }).success(function (data, status, headers, config) {\r\n                    console.log(data.reservations);\r\n                    callback(data.reservations);\r\n                }).error(function (data, status, headers, config) {\r\n                    callback({\r\n                        success: false\r\n                    });\r\n                });\r\n            }\r\n        }\r\n\r\n        return {\r\n            get: get\r\n        };\r\n   }\r\n]);\r\n\r\n// POST: https://lukkarit.tamk.fi/teeHaku.php \r\n// searches the db for matches\r\n// formdata:\r\n// hakukohde=&hakukohde=nimi_koodi&hakusana=k%C3%A4ytett%C3%A4vyys\r\n// https://lukkarit.tamk.fi/paivitaKori.php?toiminto=refresh&code=false&viewReply=true\r\n// response --> html\r\n// updates the basket with the results (html)\r\n// https://lukkarit.tamk.fi/toteutusInfo.php?code=4A00CN36-3004\r\n// response --> html\r\n// shows info about the course when one is clicked in the basket(html)\r\n\r\nlukkariServices.factory('Timetables', ['$http', 'ical', '$cookies', 'ApiEndpoint', 'MyDate',\r\nfunction ($http, ical, $cookies, ApiEndpoint, MyDate) {\r\n        var appointments = [];\r\n\r\n        // Generates perfect ical, BUT at least android doesn't support adding a calendar\r\n        // so it's unused.\r\n        function toICAL() {\r\n            var vCal = new ical.Component(['vcalendar', [], []]);\r\n            vCal.updatePropertyWithValue('prodid', '-//Lukkari generated calendar');\r\n            // create new component for each appointment\r\n            for (var i = 0; i < appointments.length; i++) {\r\n                var vEvent = new ical.Component('vevent');\r\n                var event = new ical.Event(vEvent);\r\n\r\n                // set properties\r\n                event.summary = appointments[i].summary + ' ' +\r\n                    appointments[i].courseNumber;\r\n                event.status = 'ACCEPTED';\r\n                event.organizer = appointments[i].teacher;\r\n                event.location = appointments[i].location;\r\n                vEvent.addPropertyWithValue('dtstart',\r\n                    ical.Time.fromJSDate(appointments[i].startDate));\r\n                vEvent.addPropertyWithValue('dtend',\r\n                    ical.Time.fromJSDate(appointments[i].endDate));\r\n\r\n                // create alarm \r\n                var valarm = new ical.Component('valarm');\r\n                valarm.addPropertyWithValue('trigger', '-PT10M');\r\n                valarm.addPropertyWithValue('action', 'DISPLAY');\r\n                valarm.addPropertyWithValue('description', 'Reminder');\r\n\r\n                // add alarm to evenet\r\n                vEvent.addSubcomponent(valarm);\r\n\r\n                // add element to cal\r\n                vCal.addSubcomponent(vEvent);\r\n            }\r\n\r\n            //console.log(vCal.toString());\r\n            return vCal.toString();\r\n        }\r\n\r\n        // make a http get request that adds the group to the shopping bin\r\n        //, using proxy if needed (in development)\r\n        // and use credentials so that cookies are used.\r\n        function makeRequest(groupName, startDate, endDate, callback) {\r\n            // clear appointments\r\n            appointments = [];\r\n            // remove phpsessid cookie, because the server\r\n            // piles the groups into a 'shopping basket'\r\n            $cookies.remove('PHPSESSID');\r\n            $http({\r\n                method: 'GET',\r\n                url: ApiEndpoint.url + '/paivitaKori.php?toiminto=addGroup&code=' + groupName.toUpperCase(),\r\n                withCredentials: true\r\n            }).then(function (response) {\r\n                // after we get response do new query that gets the ical \r\n                $http({\r\n                    method: 'GET',\r\n                    url: ApiEndpoint.url + '/icalcreator.php?startDate=' +\r\n                        MyDate.formatDay(startDate, true) + '&endDate=' + MyDate.formatDay(endDate, true)\r\n                }).then(function (response) {\r\n                    // get the ical from the response and parse it\r\n                    var events = getEvents(response.data);\r\n                    for (var i = 0; i < events.length; i++) {\r\n                        var appointment = parseEvent(events[i], i);\r\n                        appointments.push(appointment);\r\n                    }\r\n\r\n                    // call callback function when finished\r\n                    callback(appointments);\r\n                });\r\n            });\r\n        }\r\n\r\n        // returns weeks appointments\r\n        function getWeek(groupName, weekOffset, callback) {\r\n            var thisMonday = MyDate.getMonday(new Date());\r\n            var monday = MyDate.getDayFromDay(thisMonday, weekOffset * 6);\r\n            var sunday = MyDate.getDayFromDay(monday, 6);\r\n            makeRequest(groupName, monday, sunday, callback);\r\n        }\r\n\r\n        // returns days appointments\r\n        function getDay(groupName, dayOffset, callback) {\r\n            var day = MyDate.getDayFromToday(dayOffset);\r\n            makeRequest(groupName, day, day, callback);\r\n        }\r\n\r\n        // returns appointment with properties\r\n        function parseEvent(vEvent, index) {\r\n            var appointment = {};\r\n            var event = new ical.Event(vEvent);\r\n            // try to parse the ical into logical components...\r\n            appointment.summary = (event.summary.split(/[0-9]+/)[0]);\r\n            appointment.courseNumber = (event.summary.slice(appointment.summary.length));\r\n            // TODO could make this into array, and loop in views for each piece...\r\n            appointment.location = (event.location.split(' - ')[0]);\r\n            // try to split location into nicer bits, might fail\r\n            // it's not standardized..\r\n            try {\r\n                appointment.locationInfo = (event.location\r\n                    .slice(appointment.location.length + 2)).split(', ')[0];\r\n                appointment.locationInfo2 = (event.location\r\n                    .slice(appointment.location.length + 2)).split(', ')[1];\r\n            } catch (e) {\r\n                appointment.locationInfo = event.location;\r\n            }\r\n\r\n            // try to get teacher from description\r\n            // might fail, it isn't standardized ...\r\n            try {\r\n                appointment.teacher = (event.description\r\n                    .split(/Henkilö\\(t\\): /)[1]).split(/Ryhmä\\(t\\): /)[0];\r\n                appointment.teacher = appointment.teacher;\r\n            } catch (e) {\r\n                appointment.teacher = event.description;\r\n            }\r\n\r\n            // try to parse group name, but it may fail.\r\n            // this field isn't standardized for some reason..\r\n            try {\r\n                appointment.groups = (event.description\r\n                    .slice((event.description\r\n                        .split(/Ryhmä\\(t\\): /)[0]).length)).split(/Ryhmä\\(t\\): /)[1];\r\n            } catch (e) {\r\n                appointment.groups = event.description;\r\n            }\r\n            appointment.groups = appointment.groups;\r\n\r\n            // trim all fields (they are messy as fuck)\r\n            for (var key in appointment) {\r\n                appointment[key] = appointment[key].trim();\r\n            }\r\n\r\n            appointment.id = index;\r\n            // https://github.com/mozilla-comm/ical.js/wiki/Parsing-basic-iCalendar\r\n            appointment.startDate = event.startDate.toJSDate();\r\n            appointment.endDate = event.endDate.toJSDate();\r\n            appointment.day = event.startDate.dayOfWeek() - 2;\r\n            return appointment;\r\n        }\r\n\r\n        // returns array containing vEvents from the ical\r\n        function getEvents(icalData) {\r\n            // parse ical to vCal format\r\n            var vCal = ical.parse(icalData);\r\n            // extract the vcal (needed for this to work, lol)\r\n            var comp = new ical.Component(vCal);\r\n            // return all vevents\r\n            return comp.getAllSubcomponents();\r\n        }\r\n\r\n        // returns an appointment with id (for the single appointment view)\r\n        function getAppointment(id) {\r\n            return appointments[id];\r\n        }\r\n\r\n        return {\r\n            getWeek: getWeek,\r\n            getAppointment: getAppointment,\r\n            getDay: getDay,\r\n            toICAL: toICAL\r\n        };\r\n}]);"],"sourceRoot":"/source/"}